schema: '2.0'
stages:
  filter_by_frequency:
    cmd: python3 src/data/filter_by_frequency.py
    deps:
    - path: data/raw/loc-brightkite_totalCheckins.txt
      md5: afeb1b5472c391929b6de33724e9ac98
      size: 382119602
    - path: src/data/filter_by_frequency.py
      md5: 9a25bbca052c3cbf41b328b63600fee6
      size: 1320
    params:
      params.yaml:
        filter.required_unique_places: 5
        filter.required_unique_visitors: 10
    outs:
    - path: data/interim/filtered_by_frequency.csv
      md5: 846dd8e38493ace43743e92f00724a9b
      size: 61767895
  categorize_geoposition:
    cmd: python3 src/features/categorize_geoposition.py
    deps:
    - path: data/interim/filtered_by_frequency.csv
      md5: 846dd8e38493ace43743e92f00724a9b
      size: 61767895
    - path: src/features/categorize_geoposition.py
      md5: fd4adb0d7bd5f6e97e10df656ae7f0a4
      size: 701
    params:
      params.yaml:
        geoposition.round_precision: 2
    outs:
    - path: data/interim/categorical_geoposition.csv
      md5: 61bc80589beb3a90a77ecc19c12af9c8
      size: 9430818
  label_encode:
    cmd: python3 src/features/label_encode.py
    deps:
    - path: data/interim/categorical_geoposition.csv
      md5: 61bc80589beb3a90a77ecc19c12af9c8
      size: 9430818
    - path: data/interim/filtered_by_frequency.csv
      md5: 846dd8e38493ace43743e92f00724a9b
      size: 61767895
    - path: src/features/label_encode.py
      md5: 4ad4518007a3d3fc43a7308b4282de4a
      size: 1074
    outs:
    - path: artifacts/label_encoders.pkl
      md5: bb1dd5690623a9f791ac9f65d05668bb
      size: 345384
    - path: data/interim/label_encoded.csv
      md5: 3a7912854dae9fff872aacabfeb407c5
      size: 10636838
